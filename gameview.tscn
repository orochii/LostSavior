[gd_scene load_steps=10 format=3 uid="uid://bx5i6m54tjhk4"]

[ext_resource type="Script" path="res://Source/Game.cs" id="1_5onwa"]
[ext_resource type="PackedScene" uid="uid://cybqiaksbhgx6" path="res://Objects/player.tscn" id="1_qbwex"]
[ext_resource type="PackedScene" uid="uid://db0c5ftapdirs" path="res://Maps/world.tscn" id="3_ijwsy"]
[ext_resource type="Texture2D" uid="uid://bw3hu5egje1ne" path="res://Graphics/System/HUD.png" id="4_rk0md"]
[ext_resource type="Script" path="res://Source/UI/Worldmap.cs" id="5_40ipd"]
[ext_resource type="Texture2D" uid="uid://6s7m2l2cnjys" path="res://Graphics/System/mmap_loc.png" id="6_exkm1"]

[sub_resource type="AtlasTexture" id="AtlasTexture_0flm7"]
atlas = ExtResource("4_rk0md")
region = Rect2(0, 0, 96, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_esw0t"]
atlas = ExtResource("4_rk0md")
region = Rect2(0, 192, 40, 48)

[sub_resource type="AtlasTexture" id="AtlasTexture_gr51g"]
atlas = ExtResource("4_rk0md")
region = Rect2(240, 168, 80, 72)

[node name="GameView" type="Control" node_paths=PackedStringArray("viewport", "camera")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_5onwa")
playerTemplate = ExtResource("1_qbwex")
worldTemplate = ExtResource("3_ijwsy")
viewport = NodePath("SubViewportContainer/SubViewport")
camera = NodePath("SubViewportContainer/SubViewport/Camera2D")
cameraOffset = Vector2(0, -32)

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
texture_filter = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
own_world_3d = true
handle_input_locally = false
snap_2d_transforms_to_pixel = true
snap_2d_vertices_to_pixel = true
canvas_item_default_texture_filter = 0
canvas_cull_mask = 4293950495
size = Vector2i(1280, 720)
size_2d_override = Vector2i(480, 270)
size_2d_override_stretch = true
render_target_update_mode = 4

[node name="Camera2D" type="Camera2D" parent="SubViewportContainer/SubViewport"]

[node name="CanvasLayer" type="CanvasLayer" parent="SubViewportContainer/SubViewport"]

[node name="Control" type="Control" parent="SubViewportContainer/SubViewport/CanvasLayer"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Health" type="TextureRect" parent="SubViewportContainer/SubViewport/CanvasLayer/Control"]
layout_mode = 1
offset_right = 96.0
offset_bottom = 28.0
texture = SubResource("AtlasTexture_0flm7")
stretch_mode = 2

[node name="Deck" type="TextureRect" parent="SubViewportContainer/SubViewport/CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -48.0
offset_right = 40.0
grow_vertical = 0
texture = SubResource("AtlasTexture_esw0t")
stretch_mode = 2

[node name="Hand" type="TextureRect" parent="SubViewportContainer/SubViewport/CanvasLayer/Control"]
layout_mode = 1
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -80.0
offset_top = -72.0
grow_horizontal = 0
grow_vertical = 0
texture = SubResource("AtlasTexture_gr51g")
stretch_mode = 2

[node name="Worldmap" type="Control" parent="SubViewportContainer/SubViewport/CanvasLayer" node_paths=PackedStringArray("thisViewport", "parentViewport", "minimapCamera", "playerSprite")]
process_mode = 2
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_40ipd")
thisViewport = NodePath("Container/Mask/SubViewportContainer/SubViewport")
parentViewport = NodePath("../..")
minimapCamera = NodePath("Container/Mask/SubViewportContainer/SubViewport/MinimapCam")
playerSprite = NodePath("Container/Mask/PlayerPosOffset/PlayerPos")

[node name="Overlay" type="ColorRect" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.25098)

[node name="Container" type="Control" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 16.0
offset_top = 32.0
offset_right = -16.0
offset_bottom = -32.0
grow_horizontal = 2
grow_vertical = 2

[node name="Background" type="ColorRect" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.25098)

[node name="Mask" type="ColorRect" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container"]
clip_children = 1
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="SubViewportContainer" type="SubViewportContainer" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container/Mask"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container/Mask/SubViewportContainer"]
transparent_bg = true
handle_input_locally = false
canvas_cull_mask = 4293918751
size = Vector2i(448, 206)
render_target_update_mode = 0

[node name="MinimapCam" type="Camera2D" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container/Mask/SubViewportContainer/SubViewport"]
zoom = Vector2(0.1, 0.1)

[node name="PlayerPosOffset" type="Control" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container/Mask"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2

[node name="PlayerPos" type="Sprite2D" parent="SubViewportContainer/SubViewport/CanvasLayer/Worldmap/Container/Mask/PlayerPosOffset"]
texture = ExtResource("6_exkm1")
